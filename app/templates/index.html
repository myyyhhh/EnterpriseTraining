<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能助手 - 用户切换功能</title>
    <!-- 图标库导入 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="../static/index.css">
    <style>
        /* index.css */
    </style>
</head>
<body>
    <div class="app-container" id="app-container">
        <!-- 左侧导航 -->
        <div class="sidebar" id="sidebar">
            <!-- 折叠按钮 -->
            <div class="toggle-btn" id="toggleBtn">
                <i class="fas fa-chevron-left"></i>
            </div>

            <!-- 用户信息区域 -->
            <div class="user-info" id="userInfo">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-name">张小明</div>
                <div class="user-role">高级会员</div>

                <!-- 用户切换菜单 -->
                <div class="user-switch-menu" id="userSwitchMenu">
                    <div class="switch-user-item">
                        <i class="fas fa-user"></i> 用户一
                    </div>
                    <div class="switch-user-item">
                        <i class="fas fa-user"></i> 用户二
                    </div>
                    <div class="switch-user-item">
                        <i class="fas fa-user-plus"></i> 添加用户
                    </div>
                    <div class="switch-user-item">
                        <i class="fas fa-sign-out-alt"></i> 退出登录
                    </div>
                </div>
            </div>

            <!-- 导航菜单 -->
            <div class="nav-menu">

                <!-- 首页 -->
                <div class="nav-item active" data-view="home">
                    <div class="nav-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="tooltip">首页</div>
                </div>

                <!-- 聊天 -->
                <div class="nav-item " data-view="chat">
                    <div class="nav-icon">
                        <i class="fas fa-comments"></i>
                    </div>
                    <div class="tooltip">对话</div>
                </div>

                <!-- 心理测试 -->
                <div class="nav-item" data-view="test">
                    <div class="nav-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="tooltip">心理测试</div>
                </div>

                <!-- 我的信息 -->
                <div class="nav-item" data-view="profile">
                    <div class="nav-icon">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="tooltip">我的信息</div>
                </div>

                <!-- 管家意见 -->
                <div class="nav-item" data-view="advice">
                    <div class="nav-icon">
                        <i class="fas fa-lightbulb"></i>
                    </div>
                    <div class="tooltip">管家意见</div>
                </div>

            </div>
        </div>

        <!-- 右侧内容区域 -->
        <div class="content-area">
            <div class="the-home content-page active" data-view="home">
                <div class="content-header">
                    <h1 class="content-title">
                        <i class="fas fa-users-cog"></i> 首页
                    </h1>
                    <p class="content-subtitle">点击侧边栏用户头像即可切换账户或管理用户设置</p>
                </div>
                <div class="content-body">
                    <div class="highlight-box">
                        <h2 class="highlight-title">
                            <i class="fas fa-lightbulb"></i> 用户切换功能已激活！
                        </h2>
                        <p>您现在可以通过点击左上角的用户头像来打开用户切换菜单。该功能允许您快速切换账户、添加新用户或修改账户设置。</p>
                    </div>

                    <div class="feature-explanation">
                        <h2 class="feature-title">
                            <i class="fas fa-code"></i> 用户切换菜单实现原理
                        </h2>
                        <div class="feature-content">
                            <p>我将详细解释如何将用户切换功能绑定到用户头像上：</p>

                            <ul>
                                <li><strong>HTML结构</strong> - 将用户切换菜单放置在用户信息区域内部，使用绝对定位</li>
                                <li><strong>CSS样式</strong> - 设置菜单初始状态为隐藏，添加平滑过渡动画</li>
                                <li><strong>事件绑定</strong> - 为<code>userInfo</code>元素添加点击事件监听器</li>
                                <li><strong>菜单控制</strong> - 点击头像时切换<code>active</code>类控制菜单显示/隐藏</li>
                                <li><strong>事件冒泡处理</strong> - 点击菜单时阻止事件冒泡，点击页面其他区域关闭菜单</li>
                            </ul>

                            <p>核心代码片段：</p>
                            <!-- <pre
                                style="background: #2c3e50; color: #ecf0f1; padding: 20px; border-radius: 10px; margin: 20px 0;">
                            // 获取DOM元素
                            const userInfo = document.getElementById('userInfo');
                            const userSwitchMenu = document.getElementById('userSwitchMenu');

                            // 点击用户信息区域切换菜单
                            userInfo.addEventListener('click', function(e) {
                                e.stopPropagation();
                                userSwitchMenu.classList.toggle('active');
                            });

                            // 点击页面其他区域关闭菜单
                            document.addEventListener('click', function() {
                                userSwitchMenu.classList.remove('active');
                            });

                            // 阻止菜单点击事件冒泡
                            userSwitchMenu.addEventListener('click', function(e) {
                                e.stopPropagation();
                            });
                        </pre> -->
                        </div>
                    </div>

                    <div class="content-card">
                        <h2 class="card-title">
                            <i class="fas fa-user-friends"></i> 多账户管理
                        </h2>
                        <p>用户切换功能支持管理多个账户，每个账户可以有不同的权限和设置：</p>

                        <div class="user-card">
                            <div class="user-card-avatar" style="background: linear-gradient(45deg, #ff7e5f, #feb47b);">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="user-card-info">
                                <div class="user-card-name">张小明</div>
                                <div class="user-card-role">高级会员</div>
                            </div>
                            <div class="user-card-status">当前账户</div>
                        </div>

                        <div class="user-card">
                            <div class="user-card-avatar" style="background: linear-gradient(45deg, #3a7bd5, #00d2ff);">
                                <i class="fas fa-user-tie"></i>
                            </div>
                            <div class="user-card-info">
                                <div class="user-card-name">李华</div>
                                <div class="user-card-role">系统管理员</div>
                            </div>
                            <div class="user-card-status">可切换</div>
                        </div>

                        <div class="user-card">
                            <div class="user-card-avatar" style="background: linear-gradient(45deg, #614385, #516395);">
                                <i class="fas fa-user-graduate"></i>
                            </div>
                            <div class="user-card-info">
                                <div class="user-card-name">王芳</div>
                                <div class="user-card-role">普通会员</div>
                            </div>
                            <div class="user-card-status">可切换</div>
                        </div>
                    </div>

                    <div class="content-card">
                        <h2 class="card-title">
                            <i class="fas fa-magic"></i> 功能特点
                        </h2>
                        <ul style="list-style-type: none; padding-left: 20px;">
                            <li style="margin-bottom: 20px; padding-left: 35px; position: relative;">
                                <i style="position: absolute; left: 0; top: 0; color: #3a7bd5; font-size: 24px;"
                                    class="fas fa-check-circle"></i>
                                <strong style="font-size: 19px; color: #2c3e50;">直观的用户体验</strong>
                                <p style="margin-top: 8px; color: #7f8c8d;">用户头像作为自然交互点，符合用户习惯</p>
                            </li>
                            <li style="margin-bottom: 20px; padding-left: 35px; position: relative;">
                                <i style="position: absolute; left: 0; top: 0; color: #3a7bd5; font-size: 24px;"
                                    class="fas fa-check-circle"></i>
                                <strong style="font-size: 19px; color: #2c3e50;">平滑动画效果</strong>
                                <p style="margin-top: 8px; color: #7f8c8d;">菜单出现带有平滑过渡，提升视觉体验</p>
                            </li>
                            <li style="margin-bottom: 20px; padding-left: 35px; position: relative;">
                                <i style="position: absolute; left: 0; top: 0; color: #3a7bd5; font-size: 24px;"
                                    class="fas fa-check-circle"></i>
                                <strong style="font-size: 19px; color: #2c3e50;">智能定位</strong>
                                <p style="margin-top: 8px; color: #7f8c8d;">菜单自动定位在用户头像下方，带指示箭头</p>
                            </li>
                            <li style="margin-bottom: 20px; padding-left: 35px; position: relative;">
                                <i style="position: absolute; left: 0; top: 0; color: #3a7bd5; font-size: 24px;"
                                    class="fas fa-check-circle"></i>
                                <strong style="font-size: 19px; color: #2c3e50;">响应式设计</strong>
                                <p style="margin-top: 8px; color: #7f8c8d;">在各种屏幕尺寸上都能完美显示</p>
                            </li>
                        </ul>
                    </div>
                </div>

            </div>
            <div class="the-communication content-page" data-view="chat">
                <div class="content-header">
                    <h1 class="content-title">
                        <i class="fas fa-users-cog"></i> 对话
                    </h1>
                    <p class="content-subtitle">与智能管家对话</p>
                </div>
                <div class="content-body">
                    <div class="chat-history">
                        <!-- 1. 系统消息 -->
                        <div class="message message-system">
                            <div class="message-content">系统提示：欢迎加入聊天</div>
                        </div>

                        <!-- 2. 他人消息 -->
                        
                        <div class="message message-other">
                            <div class="message-header">
                                <div class="message-sender">张三</div>
                                <div class="message-time">14:30</div>
                            </div>
                            <div class="message-content">你好！这是一条他人发送的消息</div>
                        </div>


                        <!-- 3. 自己的消息 -->
                        <div class="message message-self">
                            <div class="message-header">
                                <div class="message-sender">我</div>
                                <div class="message-time">14:32</div>
                            </div>
                            <div class="message-content">你好！这是一条自己发送的消息</div>
                        </div>
                    </div>
                    <div class="the-communication-input">
                        <input type="text" placeholder="输入消息...">
                        <button>发送</button>
                    </div>


                </div>


            </div>

            <div class="the-psychological-test content-page" data-view="test">
                <div class="content-header">
                    <h1 class="content-title">
                        <i class="fas fa-users-cog"></i> 心理测试
                    </h1>
                    <p class="content-subtitle">为你做一个心理测试</p>
                </div>


                <div class="content-body">


                </div>
            </div>

            <div class="the-my-info content-page" data-view="profile">
                <div class="content-header">
                    <h1 class="content-title">
                        <i class="fas fa-users-cog"></i> 我的信息
                    </h1>
                    <p class="content-subtitle">我的信息概览</p>
                </div>
                <div class="content-body">
                    {% if current_user.is_authenticated %}

                        
                    {% end if %}
                </div>
            </div>
            <div class="the-advice content-page" data-view="advice">

                <div class="content-header">
                    <h1 class="content-title">
                        <i class="fas fa-users-cog"></i> 管家意见
                    </h1>
                    <p class="content-subtitle">管家意见汇总</p>
                </div>
                <div class="content-body">

                </div>
            </div>
        </div>
    </div>

    <script>

        //==========DOM元素=================

        const toggleBtn = document.getElementById('toggleBtn'); // 折叠按钮
        const sidebar = document.getElementById('sidebar');     //侧边栏  
        const userInfo = document.getElementById('userInfo');    //用户信息区域
        const userSwitchMenu = document.getElementById('userSwitchMenu');    //用户切换菜单
        const switchItems = document.querySelectorAll('.switch-user-item');  //用户切换菜单项
        // const loginBtn = document.getElementById('loginBtn');
        // const loginContainer = document.getElementById('loginContainer');
        // const username = document.getElementById('inputUsername');
        // const password = document.getElementById('inputPassword');
        const appContainer = document.getElementById('app-container');

        // //==============登录==========================

        // // 登录按钮点击事件
        // loginBtn.addEventListener(
        //     'click',
        //     function () {
        //         const usernameVal = username.value.trim();
        //         const passwordVal = password.value.trim();
        //         if (true) {/*right*/
        //             getLogin();
        //         } else {
        //             alert('用户名或密码错误，请重新输入！');
        //         }
        //     }
        // );

        // function getLogin() {
        //     appContainer.style.display = 'flex';
        //     loginContainer.style.display = 'none';
        // }


        //===========主界面===========================

        // ------------折叠功能--------------

        toggleBtn.addEventListener('click', function () {
            sidebar.classList.toggle('collapsed');
        });

        // -------------用户菜单---------------

        // 用户切换功能（绑定到用户信息区域）
        userInfo.addEventListener('click', function (e) {
            // console.log(e);
            e.stopPropagation();
            userSwitchMenu.classList.toggle('active');
        });


        //点击页面其他区域关闭菜单
        document.addEventListener('click', function () {
            userSwitchMenu.classList.remove('active');
        });

        //阻止菜单点击事件冒泡
        userSwitchMenu.addEventListener('click', function (e) {
            e.stopPropagation();
        });

        // 菜单项点击事件
        switchItems.forEach(item => {
            item.addEventListener('click', function () {
                const userName = this.textContent.trim();
                if (userName === "添加用户" || userName === "账户设置" || userName === "退出登录") {
                    alert(`正在执行: ${userName}`);
                } else {
                    document.querySelector('.user-name').textContent = userName;
                    if (userName === "李华") {
                        document.querySelector('.user-role').textContent = "系统管理员";
                    } else if (userName === "王芳") {
                        document.querySelector('.user-role').textContent = "普通会员";
                    } else {
                        document.querySelector('.user-role').textContent = "高级会员";
                    }
                    alert(`已切换到用户: ${userName}`);
                }
                userSwitchMenu.classList.remove('active');
            });
        });

        //--------------导航功能--------------

        // 导航项点击事件
        // 获取DOM元素
        const navItems = document.querySelectorAll('.nav-item');
        const contentPages = document.querySelectorAll('.content-page');

        // 导航切换功能
        function switchView(viewName) {
            // 更新导航项状态
            navItems.forEach(item => {
                if (item.getAttribute('data-view') === viewName) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });

            // 更新内容页面
            contentPages.forEach(page => {
                if (page.getAttribute('data-view') === viewName) {
                    page.classList.add('active');
                } else {
                    page.classList.remove('active');
                }
            });
        }

        // 为每个导航项添加点击事件
        navItems.forEach(item => {
            item.addEventListener('click', function () {
                const viewName = this.getAttribute('data-view');
                switchView(viewName);
            });
        });

        //============初始化=============        
        appContainer.style.display = 'flex';

        switchView('home');

    </script>
</body>

</html>